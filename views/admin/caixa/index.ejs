<div class="container">
  <h2>Controle de Caixa</h2>
  <div class="mb-3">
    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAbrirCaixa">Abrir Caixa</button>
    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalFecharCaixa">Fechar Caixa</button>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalMovimentoCaixa">Registrar Movimento</button>
    <a href="/admin/caixa/resumo" class="btn btn-info">Resumo do Caixa</a>
  </div>
  <div id="statusCaixa"></div>
</div>
<script>
async function atualizarStatusCaixa() {
  const resp = await fetch('/admin/caixa/getStatus');
  const json = await resp.json();
  let html = '';
  if(json.status == 1) {
    html = `<div class='alert alert-success'>Caixa aberto - Valor atual: R$ ${json.valor}</div>`;
  } else {
    html = `<div class='alert alert-warning'>Nenhum caixa aberto</div>`;
  }
  document.getElementById('statusCaixa').innerHTML = html;
}
document.addEventListener('DOMContentLoaded', atualizarStatusCaixa);
</script>
